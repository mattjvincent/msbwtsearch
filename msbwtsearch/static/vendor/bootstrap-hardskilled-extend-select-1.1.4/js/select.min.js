(function(a){function b(a){if('top-start'===a.attr('x-placement')){const b=a.outerHeight(!0);a.css('transform',`translate3d(0px, -${b}px, 0px)`)}}function c(b,c,d){a(b).find('.dropdown-header, .dropdown-item').remove();const e=(c)=>{const d=c.innerText,e=a('<a href="#" class="dropdown-item" />').text(d);e.attr('data-index',a(c).data('index')),a(c).is('option:selected')&&e.addClass(l.activeClass),a(c).is('option:disabled')&&e.addClass(l.disabledClass),b.append(e)},f=(c)=>{const d=a(c).attr('label'),e=a('<span class="dropdown-header"/>').text(d);b.append(e)},g=(b)=>{a(b).each((b,c)=>{if(!(d&&a(c).is(':disabled'))){if(a(c).is('optgroup')){const b=a(c).children();f(c),g(b)}a(c).is('option')&&e(c)}})};return c=c.filter((b,c)=>!d||a(c).is(':enabled')),0===c.length?void(()=>{const c=a('<span class="dropdown-header"/>').text(l.empty);b.append(c)})():void g(c)}function d(b){const c=a(b).find('option:selected'),d=[];return c.each((a,b)=>{d.push(b.innerText)}),0===c.length?l.notSelectedTitle:d.join(', ')}function e(b,c){const e=d(b);a(c).find('.btn').text(e)}function f(b){const c=a(b),d=a(c).prev(`.${h}`);e(c,d)}function g(b){if(!a(b).is('select'))throw new Error('Only <select /> elements are allowed');if(!a(b).hasClass(i)){const c=a(b).data('input-group')?' input-group-prepend':'',e=a(b).data('btn-class')||'btn-secondary',f=d(b),g=a('<button class="btn dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"/>').addClass(e),j=a('<div class="alert alert-danger select-extend-alert" role="alert"/>'),l=a('<div class="dropdown-menu"/>').append(j),m=a('<div class="dropdown"/>').addClass(h+c);a(b).find('option').each((b,c)=>a(c).attr('data-index',b)),a(b).addClass(i),a(b).before(m.append(g.text(f),l)),a(b).data('input-group')&&a(b).parent().children(':visible:last').addClass(k)}}const h='select-extended-element',i='select-extend',j='select-search',k='select-last-element';let l={search:'Search',notSelectedTitle:'Nothing to shown',empty:'Nothing to shown',activeClass:'active',disabledClass:'disabled',maxOptionMessage:'Limit reached (%items items max)',maxOptionMessageDelay:2e3,popoverResize:!1,dropdownResize:!1};a('body').on('click',`.${h} .dropdown-menu > *`,function(b){b.preventDefault();const c=a(this).parents(2).next(`.${i}`),d=a(this).parent(),e=c.attr('multiple'),g=c.data('max-options'),h=c.data('max-options-message')||l.maxOptionMessage,k=c.find('option:selected').length,m=a(this).data('index'),n=c.find('option[data-index="'+m+'"]');if(e&&b.stopPropagation(),!(a(this).hasClass(l.disabledClass)||a(this).hasClass('dropdown-header')||a(this).hasClass(j))){if(g&&!a(n).attr('selected')&&k>=g){const b=a(d).find('.select-extend-alert');return a(b).text(h.replace('%items',g)),a(b).fadeIn(200),void setTimeout(()=>a(b).fadeOut(200),l.maxOptionMessageDelay)}e||(c.find('option').attr('selected',!1),d.find(`.${l.activeClass}`).removeClass(l.activeClass)),a(n).attr('selected',!a(n).attr('selected')).trigger('change'),a(this).toggleClass(l.activeClass),f(c)}}).on('show.bs.dropdown',`.${h}`,function(d){function e(b){return function(c,d){return a(d).text().toLowerCase().includes(b.toLowerCase())}}function f(){const d=a(this).val(),f=g.find('option').filter(e(d)),i=d?f:g.children();l.popoverResize||h.css('height',h.outerHeight()),c(h,i,g.data('hide-disabled')),l.popoverResize&&b(h)}const g=a(this).next(`.${i}`),h=a(this).find('.dropdown-menu'),k=a(this).find('.btn'),m=a(g).data('live-search');if(m){const b=a(g).data('live-search-placeholder')||l.search,c=a('<input class="form-control" type="text" autofocus>').addClass(j).attr('placeholder',b);a(`.${j}`).remove(),h.append(c),h.find(`.${j}`).on('input',f)}c(h,g.children(),g.data('hide-disabled')),setTimeout(()=>a('[autofocus]',d.target).focus(),100),l.dropdownResize&&h.css('min-width',k.outerWidth())}).on('hide.bs.dropdown',`.${h}`,function(){a(this).find('.dropdown-menu .select-search').off('change')}).on('change',`.${i}`,function(){f(this)}),a.fn.extendSelect=function(b){try{b&&(l=Object.assign(l,b)),a(this).each((a,b)=>g(b))}catch(a){console.error(a)}}})(jQuery);